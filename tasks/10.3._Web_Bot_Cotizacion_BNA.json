{"task":{"order":0,"enable":true,"type":"script","public":false,"tags":[],"grace_time":0,"task_arguments":[],"arguments_type":"legacy","output_parameters":[],"register_body":false,"execution_count":34,"multitasking":true,"show_result":false,"assigned_users":[],"user_inputs":false,"user_inputs_members":[],"empty_viewers":false,"cancellable":true,"autoremove_completed_jobs_limit":5,"script_arguments":[],"logging":false,"_type":"ScriptTask","creation_date":"2022-01-10T19:49:23.240Z","last_update":"2022-01-24T19:13:20.405Z","name":"10.3. Web Bot Cotizaci√≥n BNA","description":"","timeout":600000,"allows_dynamic_settings":false,"script_runas":"node %script%","template":null,"template_id":null,"source_model_id":"61dc8dc3fc4d8c00127ad9a5"},"file":{"order":0,"filename":"section_10.3.js","keyname":"section_10.3.js[ts:1643051542199]","mimetype":"text/javascript","extension":"js","size":4239,"description":"","md5":"55f5be23bb5a2401203b6e0249c0a151","public":false,"tags":[],"source_model_id":"61dc8db0724e690012fa3223","data":"Ly8gZXJyb3IgYW5kIG91dHB1dCBoYW5kbGVycyBtdXN0IGdvIGZpcnN0LgoKLyoqCiAqIEBwYXJhbSB7T2JqZWN0fQogKiBAcHJvcCB7TWl4ZWR9IGRhdGEKICogQHByb3Age0FycmF5fSBjb21wb25lbnRzCiAqIEBwcm9wIHtPYmplY3R9IG5leHQKICovCmNvbnN0IHN1Y2Nlc3NPdXRwdXQgPSAoeyBkYXRhLCBjb21wb25lbnRzLCBuZXh0IH0pID0+IHsKICAvLyBodHRwczovL2RvY3VtZW50YXRpb24udGhlZXllLmlvL2NvcmUtY29uY2VwdHMvc2NyaXB0cy8jcGFzc2luZy1hcmd1bWVudHMtaW4td29ya2Zsb3cKICBjb25zdCBvdXRwdXQgPSB7CiAgICBzdGF0ZTogInN1Y2Nlc3MiLAogICAgZGF0YSwKICAgIGNvbXBvbmVudHMsIC8vIGh0dHBzOi8vZG9jdW1lbnRhdGlvbi50aGVleWUuaW8vY29yZS1jb25jZXB0cy90YXNrcy9zY3JpcHRfdHlwZS8jY29tcG9uZW50cwogICAgbmV4dAogIH0KICBjb25zb2xlLmxvZyggSlNPTi5zdHJpbmdpZnkob3V0cHV0KSApCiAgcHJvY2Vzcy5leGl0KDApCn0KCi8qKgogKiBAcGFyYW0ge0Vycm9yfSBlcnIKICovCmNvbnN0IGZhaWx1cmVPdXRwdXQgPSAoZXJyKSA9PiB7CiAgY29uc29sZS5lcnJvcihlcnIpCiAgY29uc3Qgb3V0cHV0ID0gewogICAgc3RhdGU6ICJmYWlsdXJlIiwKICAgIGRhdGE6IHsKICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsCiAgICAgIGNvZGU6IGVyci5jb2RlLAogICAgICBkYXRhOiBlcnIuZGF0YSAKICAgIH0KICB9CiAgY29uc29sZS5lcnJvciggSlNPTi5zdHJpbmdpZnkob3V0cHV0KSApCiAgcHJvY2Vzcy5leGl0KDEpCn0KCnByb2Nlc3Mub24oJ3VuaGFuZGxlZFJlamVjdGlvbicsIChyZWFzb24sIHApID0+IHsKICBjb25zb2xlLmVycm9yKHJlYXNvbiwgJ1VuaGFuZGxlZCBSZWplY3Rpb24gYXQgUHJvbWlzZScsIHApCiAgZmFpbHVyZU91dHB1dChyZWFzb24pCn0pCgpwcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIGVyciA9PiB7CiAgY29uc29sZS5lcnJvcihlcnIsICdVbmNhdWdodCBFeGNlcHRpb24gdGhyb3duJykKICBmYWlsdXJlT3V0cHV0KGVycikKfSkKCmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpCmNvbnN0IHB1cHBldGVlciA9IHJlcXVpcmUoJ3B1cHBldGVlcicpCmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKQpjb25zdCByZXRyeSA9IHJlcXVpcmUoJ2FzeW5jLXJldHJ5JykKY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKQoKY29uc3QgVVJMX0JOQSA9IChwcm9jZXNzLmVudi5VUkxfQk5BIHx8ICdodHRwczovL3d3dy5ibmEuY29tLmFyL1BlcnNvbmFzJykKY29uc3QgSHRtbFRhYmxlVG9Kc29uID0gcmVxdWlyZSgnaHRtbC10YWJsZS10by1qc29uJykKCmNvbnN0IG1haW4gPSBtb2R1bGUuZXhwb3J0cyA9IGFzeW5jICgpID0+IHsKICAKICBjb25zdCBhcmdzID0gcHJvY2Vzcy5hcmd2LnNsaWNlKDIpCgogIGNvbnN0IGZlY2hhUGFyYUhpc3RvcmljbyA9IChhcmdzWzBdIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSkKCiAgbW9tZW50LmxvY2FsZSgnZXMnKQoKICBhd2FpdCByZXRyeShwcmVwYXJlUGFnZSwgewogICAgcmV0cmllczogNSwKICAgIG9uUmV0cnk6IGFzeW5jIGVyciA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgY29uc29sZS5sb2coJ1JldHJ5aW5nLi4uJykKICAgICAgYXdhaXQgcGFnZS5jbG9zZSgpCiAgICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKQogICAgfQogIH0pCgogIGNvbnN0IHJlc3VsdGFkb3MgPSBhd2FpdCBvYnRlbmVyQ290aXphY2lvbmVzKGZlY2hhUGFyYUhpc3RvcmljbykKICAgIC5jYXRjaChlcnIgPT4gewogICAgICBicm93c2VyLmNsb3NlKCkKICAgICAgdGhyb3cgZXJyCiAgICB9KQoKICBicm93c2VyLmNsb3NlKCkKCiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0YWRvcyB9Cn0KCmNvbnN0IHByZXBhcmVQYWdlID0gYXN5bmMgKGJhaWwpID0+IHsKCiAgY29uc3Qgd2ViVXJsID0gVVJMX0JOQQogIGNvbnN0IGhlYWRsZXNzID0gKHByb2Nlc3MuZW52LkhFQURMRVNTICE9PSAnZmFsc2UnKQoKICBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7CiAgICBoZWFkbGVzcywKICAgIGFyZ3M6IFsKICAgICAgJy0tbm8tc2FuZGJveCcsCiAgICAgICctLWRpc2FibGUtZmVhdHVyZXM9c2l0ZS1wZXItcHJvY2VzcycsCiAgICAgICctLWRpc2FibGUtZ3B1JywKICAgICAgJy0td2luZG93LXNpemU9MTkyMHgxMDgwJwogICAgXQogIH0pCiAgdmlld1BvcnQgPSB7CiAgICB3aWR0aDogMTMwMCwKICAgIGhlaWdodDogOTAwCiAgfQoKICBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCkKICBhd2FpdCBwYWdlLnNldFVzZXJBZ2VudCgnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcyLjAuMzYyNi4xMDkgU2FmYXJpLzUzNy4zNicpCiAgYXdhaXQgcGFnZS5zZXRWaWV3cG9ydCh2aWV3UG9ydCkKICBhd2FpdCBwYWdlLnNldERlZmF1bHROYXZpZ2F0aW9uVGltZW91dCgyMDAwMCkKICBhd2FpdCBwYWdlLnNldERlZmF1bHRUaW1lb3V0KDIwMDAwKQoKICBhd2FpdCBwYWdlLmdvdG8od2ViVXJsLCB7CiAgICB3YWl0VW50aWw6ICduZXR3b3JraWRsZTAnCiAgfSkKfQoKY29uc3Qgb2J0ZW5lckNvdGl6YWNpb25lcyA9IGFzeW5jIChmZWNoYSkgPT4gewogIGNvbnN0IGZlY2hhSGlzdG9yaWNvID0gbW9tZW50KGZlY2hhKS5mb3JtYXQoJ0REL01NL1lZWVknKQogIGNvbnNvbGUubG9nKGZlY2hhSGlzdG9yaWNvKQoKICBhd2FpdCBwYWdlLndhaXRGb3JTZWxlY3RvcignZGl2LnRhYlNtYWxsJykKCiAgY29uc3QgdGFibGVCaWxsZXRlcyA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4gewogICAgY29uc3Qgcm93c0JpbGxldGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JpbGxldGVzID4gdGFibGUnKQogICAgcmV0dXJuIHJvd3NCaWxsZXRlcy5vdXRlckhUTUwKICB9KQoKICBjb25zdCBiaWxsZXRlcyA9IEh0bWxUYWJsZVRvSnNvbi5wYXJzZSh0YWJsZUJpbGxldGVzKQoKICBjb25zdCB0YWJsZURpdmlzYXMgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHsKICAgIGNvbnN0IHJvd3NEaXZpc2FzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RpdmlzYXMgPiB0YWJsZScpCiAgICByZXR1cm4gcm93c0RpdmlzYXMub3V0ZXJIVE1MCiAgfSkKCiAgY29uc3QgZGl2aXNhcyA9IEh0bWxUYWJsZVRvSnNvbi5wYXJzZSh0YWJsZURpdmlzYXMpCgogIGF3YWl0IHBhZ2UuY2xpY2soJyNidXR0b25IaXN0b3JpY29CaWxsZXRlcycpCiAgYXdhaXQgcGFnZS53YWl0Rm9yU2VsZWN0b3IoJyNmZWNoYScpCiAgYXdhaXQgcGFnZS4kZXZhbCgnI2ZlY2hhJywgKGVsZW1lbnQsIGZlY2hhKSA9PiB7CiAgICBlbGVtZW50LnZhbHVlID0gZmVjaGEKICB9LCBmZWNoYUhpc3RvcmljbykKCiAgYXdhaXQgcGFnZS5ldmFsdWF0ZShmdW5jdGlvbiAoKSB7CiAgICAkKCcjYnVzY2FySGlzdG9yaWNvJykuY2xpY2soKQogIH0pCiAgLy8gYXdhaXQgcGFnZS53YWl0Rm9yVGltZW91dCg1MDAwKQoKICBjb25zdCB0YWJsZURvbGFyID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7CiAgICBjb25zdCByb3dzRG9sYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGFibGFEb2xhciA+IHRhYmxlJykKICAgIHJldHVybiByb3dzRG9sYXIub3V0ZXJIVE1MCiAgfSkKICBjb25zdCB0YWJsZUV1cm8gPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHsKICAgIGNvbnN0IHJvd3NFdXJvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RhYmxhRXVybyA+IHRhYmxlJykKICAgIHJldHVybiByb3dzRXVyby5vdXRlckhUTUwKICB9KQoKICBjb25zdCBkb2xhciA9IEh0bWxUYWJsZVRvSnNvbi5wYXJzZSh0YWJsZURvbGFyKQogIGNvbnN0IGV1cm8gPSBIdG1sVGFibGVUb0pzb24ucGFyc2UodGFibGVFdXJvKQoKICBjb25zdCBjb3RpemFjaW9uZXMgPSB7CiAgICBiaWxsZXRlczogYmlsbGV0ZXMucmVzdWx0c1swXSwKICAgIGRpdmlzYXM6IGRpdmlzYXMucmVzdWx0c1swXSwKICAgIGhpc3RvcmljbzogewogICAgICBkb2xhcjogZG9sYXIucmVzdWx0c1swXSwKICAgICAgZXVybzogZXVyby5yZXN1bHRzWzBdCiAgICB9CiAgfQoKICByZXR1cm4gY290aXphY2lvbmVzCn0KCi8vIGludm9rZSBtYWluIGFuZCBjYXB0dXJlIHJlc3VsdCBvdXRwdXQKbWFpbigpLnRoZW4oc3VjY2Vzc091dHB1dCkuY2F0Y2goZmFpbHVyZU91dHB1dCkK"}}